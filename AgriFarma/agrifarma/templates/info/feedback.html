{% extends 'layouts/base.html' %}

{% block title %}Feedback - AgriFarma{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card shadow-soft">
        <div class="card-header">
          <h1 class="mb-0"><i class="bi bi-chat-left-text me-2"></i>Share Your Feedback</h1>
        </div>
        <div class="card-body">
          <p class="lead">
            Your feedback helps us improve AgriFarma. Whether it's a suggestion, bug report, or general comment, 
            we value your input!
          </p>

          <hr class="hr-light my-4">

          <form action="#" method="post" class="needs-validation" novalidate>
            <div class="row g-3">
              <div class="col-md-6">
                <label for="feedback-name" class="form-label">Your Name *</label>
                <input type="text" class="form-control" id="feedback-name" name="name" 
                       value="{% if current_user.is_authenticated %}{{ current_user.profile.name if current_user.profile and current_user.profile.name else current_user.email.split('@')[0] }}{% endif %}" 
                       required>
                <div class="invalid-feedback">Please provide your name.</div>
              </div>
              <div class="col-md-6">
                <label for="feedback-email" class="form-label">Your Email *</label>
                <input type="email" class="form-control" id="feedback-email" name="email" 
                       value="{% if current_user.is_authenticated %}{{ current_user.email }}{% endif %}" 
                       required>
                <div class="invalid-feedback">Please provide a valid email.</div>
              </div>

              <div class="col-12">
                <label for="feedback-type" class="form-label">Feedback Type *</label>
                <select class="form-select" id="feedback-type" name="type" required>
                  <option value="" selected disabled>Select feedback type...</option>
                  <option value="suggestion">Suggestion / Feature Request</option>
                  <option value="bug">Bug Report</option>
                  <option value="praise">Praise / Positive Feedback</option>
                  <option value="complaint">Complaint / Issue</option>
                  <option value="question">Question</option>
                  <option value="other">Other</option>
                </select>
                <div class="invalid-feedback">Please select a feedback type.</div>
              </div>

              <div class="col-12">
                <label for="feedback-category" class="form-label">Related to</label>
                <select class="form-select" id="feedback-category" name="category">
                  <option value="" selected>General / Not specific</option>
                  <option value="forum">Community Forum</option>
                  <option value="blog">Knowledge Base / Blog</option>
                  <option value="consultancy">Consultancy Services</option>
                  <option value="shop">Agricultural Shop</option>
                  <option value="account">Account / Profile</option>
                  <option value="ui">User Interface / Design</option>
                  <option value="performance">Performance / Speed</option>
                  <option value="mobile">Mobile Experience</option>
                </select>
              </div>

              <div class="col-12">
                <label for="feedback-rating" class="form-label">Overall Experience</label>
                <div class="d-flex gap-2 mb-2">
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="rating" id="rating5" value="5">
                    <label class="form-check-label" for="rating5">
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="rating" id="rating4" value="4">
                    <label class="form-check-label" for="rating4">
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star text-muted"></i>
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="rating" id="rating3" value="3">
                    <label class="form-check-label" for="rating3">
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star text-muted"></i>
                      <i class="bi bi-star text-muted"></i>
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="rating" id="rating2" value="2">
                    <label class="form-check-label" for="rating2">
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star text-muted"></i>
                      <i class="bi bi-star text-muted"></i>
                      <i class="bi bi-star text-muted"></i>
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="rating" id="rating1" value="1">
                    <label class="form-check-label" for="rating1">
                      <i class="bi bi-star-fill text-warning"></i>
                      <i class="bi bi-star text-muted"></i>
                      <i class="bi bi-star text-muted"></i>
                      <i class="bi bi-star text-muted"></i>
                      <i class="bi bi-star text-muted"></i>
                    </label>
                  </div>
                </div>
              </div>

              <div class="col-12">
                <label for="feedback-message" class="form-label">Your Feedback *</label>
                <textarea class="form-control" id="feedback-message" name="message" rows="6" 
                          placeholder="Please share your thoughts, suggestions, or concerns in detail..." 
                          required></textarea>
                <div class="invalid-feedback">Please provide your feedback.</div>
                <small class="form-text text-muted">Be as specific as possible to help us understand and address your feedback.</small>
              </div>

              <div class="col-12">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="feedback-updates" name="updates">
                  <label class="form-check-label" for="feedback-updates">
                    I'd like to receive updates on my feedback
                  </label>
                </div>
              </div>

              <div class="col-12">
                <button type="submit" class="af-btn af-btn-primary">
                  <i class="bi bi-send me-2"></i>Submit Feedback
                </button>
              </div>
            </div>
          </form>

          <hr class="hr-light my-4">

          <h2 class="h5 mb-3">Other Ways to Share</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="d-flex align-items-start">
                <i class="bi bi-envelope text-primary me-3" style="font-size: 2rem;"></i>
                <div>
                  <h3 class="h6 mb-1">Email Us</h3>
                  <p class="small mb-0">
                    Send detailed feedback to <a href="mailto:feedback@agrifarma.com">feedback@agrifarma.com</a>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="d-flex align-items-start">
                <i class="bi bi-chat-dots text-primary me-3" style="font-size: 2rem;"></i>
                <div>
                  <h3 class="h6 mb-1">Forum Discussion</h3>
                  <p class="small mb-0">
                    Share ideas publicly in our <a href="{{ url_for('forum.index') }}">Community Forum</a>
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="alert alert-success mt-4">
            <i class="bi bi-heart-fill me-2"></i>
            <strong>Thank You!</strong> Your feedback shapes the future of AgriFarma and helps us serve you better.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
